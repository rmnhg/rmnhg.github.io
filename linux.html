<!DOCTYPE HTML>
<!--By Ram칩n Hern치ndez Garc칤a @ Copyright 2018-->
<html>

<HEAD>
	<!--Website title-->
	<title>Ram칩n Hern치ndez - C칩mo compilar un kernel de Linux</title>

	<!--Webpage icon - Spain flag-->
	<link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">

	<!--Meta_tags-->
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="Ram칩n HDEZ - Creador" content="Copyright 2018 (c) Ram칩n Hern치ndez Garc칤a.">
	<meta name="robots" content="NOODP">
	<meta name="description" content="P치gina personal de Ram칩n Hern치ndez, estudiante madrile침o.">
	<meta name="author" content="Ram칩n Hern치ndez">
	<meta name="keywords" content="Linux; Android; Ram칩n Hern치ndez; web; Material Design">

	<!--Theme starts here-->	
		<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

		<!--	 Fonts and icons	 -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
		<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

		<!-- CSS Files -->
		<link href="assets/css/bootstrap.min.css" rel="stylesheet" />
		<link href="assets/css/material-kit.css" rel="stylesheet"/>

		<!-- CSS Just for demo purpose, don't include it in your project -->
		<link href="assets/css/demo.css" rel="stylesheet" />

	<!--Theme ends here-->
</HEAD>

<BODY class="index-page">

	<!-- Navbar -->
	<nav class="navbar navbar-transparent navbar-fixed-top navbar-color-on-scroll">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-index">
					<span class="sr-only">Abrir/cerrar navbar</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="https://www.github.com/rmnhg">
					<div class="logo-container">
						<div class="logo">
							<img src="assets/img/logo.png" alt="Ram칩n's Logo" rel="tooltip" title="Esta p치gina WEB ha sido creada por Ram칩n Hern치ndez" data-placement="bottom" data-html="true">
						</div>
						<div class="brand">
						Ram칩n Hern치ndez
						</div>
					</div>
				</a>
			</div>

			<div class="collapse navbar-collapse" id="navigation-index">
				<ul class="nav navbar-nav navbar-right">
					<li>
						<a href="https://rmnhg.github.io">P치gina principal
						</a>
					</li>
					<li>
						<a href="/theory">Teor칤a
						</a>
					</li>
					<li>
						<a href="/testing">Laboratorio
						</a>
					</li>
					<li>
						<a rel="tooltip" title="S칤gueme en Twitter" data-placement="bottom" href="https://twitter.com/ramonhg00" target="_blank" class="btn btn-white btn-simple btn-just-icon">
							<i class="fa fa-twitter"></i>
						</a>
					</li>
					<li>
						<a rel="tooltip" title="S칤gueme en Github" data-placement="bottom" href="https://github.com/rmnhg" target="_blank" class="btn btn-white btn-simple btn-just-icon">
							<i class="fa fa-github"></i>
						</a>
					</li>

				</ul>
			</div>
		</div>
	</nav>
	<!-- End Navbar -->
	<!--Floating settings button -->
	<div class="fixed-plugin">
            <div class="dropdown">
                <a href="#" data-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-cog fa-2x"> </i>
                </a>
                <ul class="dropdown-menu">
					<li>
						<h4><b>Ajustes:</b></h4>
						<h5>M칰sica de fondo 游꿧:</h5>
						<div class="togglebutton">
				            <label>
							<audio id="musica_de_fondo" src="http://195.10.10.225/cope/megastar.mp3?GKID=3f6301e20fee11e8adb900163e914f69" type="audio/mp4"></audio>
				               	<input type="checkbox" onclick="aud_play_pause()">
								Encender
				            </label>
				        </div>
						<div class="togglebutton">
						<label>
						<center>Volumen</center>
							<input id="vol-control" type="range" min="0" max="100" step="1" oninput="SetVolume(this.value)" onchange="SetVolume(this.value)"></input>
						</label>
						</div>
					</li>
                </ul>
            </div>
        </div>
	<!--Floating settings button end-->
	<!--Background image-->
	<div class="wrapper">
	<div class="header" style="background-image: url('assets/img/bg3.jpeg');">
		<div class="container">
			<div class="col-md-8 col-md-offset-2">
				<div class="brand">
					<h1>C칩mo compilar un kernel Linux</h1>
					<!--These entries are only for making parallax effect work-->
					<div id="sliderRegular" class="slider" style="visibility: hidden;"></div>
					<div id="sliderDouble" class="slider slider-info" style="visibility: hidden;"></div>
					<!--Finish here-->
				</div>
			</div>
		</div>
	</div>

	<div class="main main-raised"> <!--Floating cloud-->
	<div class="container"> <!--Make it more centered-->

	<div style="margin: 30px;">
	<h1><b>C칩mo compilar un kernel Linux</b></h1> <!--Strong works as bold-->
	<br>

	<h4 style="font-size: xx-large;"><b>칈ndice</span></b></h4>
	<!--This makes a list-->
	<ul>
	<li><a href="#linux">Informaci칩n b치sica. 쯈u칠 es Linux? 쯈u칠 es un kernel?</a></li>
	</ul>
	<br>

	<center>
	<h2 id="linux"><b>쯈u칠 es Linux?</b></h2>
	</center>
	Linux en un sistema operativo de c칩digo libre utilizado actualmente por millones de dispositivos en todo el planeta. Muchos sistemas operativos y sistemas est치n basados en los pilares de Linux, algunas de las distribuciones Linux m치s conocidas son Ubuntu, Debian u OpenSuse. El n칰cleo de Linux se llama <b>kernel</b> y est치 programado principalmente en C. Este n칰cleo es el que hace que todo funcione como funciona y es la base de cualquier sistema operativo basado en Linux.<br>
	<br>
	Pero Linux no solo se limita a equipos fijos, tambi칠n abarca los dispositivos m칩viles. Un ejemplo muy conocido actualmente es Android. Android es uno de los sistemas operativos m치s utlizados en los dispositivos port치tiles y su proyecto AOSP (Android Open Source Project) consiste en compartir libremente el c칩digo de su sistema operativo para que cada fabricante lo adapte a sus productos.
Como Android se basa en Linux tambi칠n utiliza su kernel con peque침as modificaciones que lo hacen ejecutarse en procesadores menos potentes.<br>
	Puedes encontrar este kernel en las particiones de boot y aboot de los dispositivos (en el caso de procesadores Snapdragon).<br>
	<b>Aboot</b> es la partici칩n b치sica que ejecuta el c칩digo del bootloader que carga las funciones m치s b치sicas, dando paso despu칠s al boot.<br>
	<b>Boot</b> es la partici칩n que contiene el kernel de linux en formato zImage, as칤 como las instrucciones de inicio de Android y el Device Tree, que es la informaci칩n acerca de los sensores del dispositivo: la corriente que necesitan y c칩mo funcionan.<br>
	En esta p치gina os voy a ense침ar c칩mo compilar el kernel para la partici칩n boot, ya que para compilar el bootloader tenemos otro proyecto m치s peque침o llamado Little Kernel.<br>
	En la ra칤z del kernel tenemos muchas carpetas. Las que m치s utilizaremos ser치n las carpetas drivers y arch.<br>
	En la carpeta de <b>drivers</b> podemos encontrar todo tipo de controladores de los cuales usaremos tan solo unos pocos. Ah칤 podremos a침adir soporte a m치s dispositivos y mejorar o arreglar los que ya est치n creados.<br>
	En la carpeta <b>arch</b> podemos gestionar la configuraci칩n del kernel antes de compilar (que nos permite activar y desactivar controladores o funciones), la configuraci칩n del procesador de destino y la informaci칩n de todos los perif칠ricos de entrada y salida que tendr치 la plataforma de destino; esto es el Device Tree.<br>
	<br>
	Teniendo un archivo de configuraci칩n en arch/&lt;arquitectura_del_procesador_destino&gt;/configs llamado, por ejemplo, Android_defconfig podemos empezar a compilar.<br>
	Para ello vamos a ejecutar este comando que copia ese archivo de configuraci칩n a la carpeta principal del kernel asign치ndole el nombre de ".config":<br>
	<pre><code>make ARCH=<b>&lt;arquitectura_del_procesador_destino&gt;</b> Android_defconfig</code></pre>
	Este es el archivo que el comando "make" leer치 al empezar a compilar.<br>
	<br>
	Finalmente para compilar necesitaremos definir un <b>CROSS COMPILE</b>, que es un conjunto de archivos binarios que permiten al procesador de un PC compilar cualquier kernel para un procesador con otra arquitectura diferente (como arm o aarch64).<br>
	En nuestro cross compile tenemos que meternos en la carpeta bin y copiar la ruta de los archivos con su prefijo. Por ejemplo si tengo:<br>
	/media/ramon/Android/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9/bin/arm-linux-androidkernel-ar<br>
	Deber칠 poner "CROSS_COMPILE=/media/ramon/Android/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9/bin/arm-linux-androidkernel-". El comando quedar칤a as칤:
	<pre><code>make ARCH=<b>&lt;arquitectura_del_procesador_destino&gt;</b> CROSS_COMPILE=/media/ramon/Android/prebuilts/gcc/linux-x86/arm/arm-linux-androideabi-4.9/bin/arm-linux-androidkernel-</b></code></pre>
	Y al ejecutarlo comenzar칤a el proceso de compilaci칩n del kernel.<br>
	<small><b>Nota:</b> para acelerar el proceso se puede a침adir el par치metro <b>-j&lt;n칰mero_de_n칰cleos_del_procesador+1&gt;</b> que utilizar치 el m치ximo potencial del procesador.</small><br>
	<br>
	Al final del proceso tendr치s un archivo llamado zImage en arch/&lt;arquitectura_del_procesador_destino&gt;/boot que ser치 el kernel en formato binario. Ese fichero se debe incluir en un boot.img y habr치 que instalar ese boot.img para probar el nuevo kernel.

	<div style="margin-top: 50px;">
	<p><b>Links 칰tiles:</b></p>
	<ul><!--This makes a list-->
	<li><a href="https://html-online.com/editor/" target="_blank" rel="noopener">Para probar c칩digo html</a></li>
	<li><a href="http://www.makeuseof.com/tag/7-cool-html-effects-that-anyone-can-add-to-their-website-nb/" target="_blank" rel="noopener">Para poner efectos guays</a></li>
	<li><a href="https://html-color-codes.info/codigos-de-colores-hexadecimales/" target="_blank" rel="noopener">Selector colores</a></li>
	<li><a href="https://rmnhg.github.io/theory">Teor칤a</a></li>
	<li><a href="https://rmnhg.github.io/testing">Laboratorio</a></li>
	<li><a href="https://rmnhg.github.io/">P치gina principal</a></li>
	</ul>
	</div>
	</div>
	</div>
	</div>
	
	<footer class="footer">
	    <div class="container">
	        <nav class="pull-left">
	            <ul>
					<li>
						<a href="https://rmnhg.github.io">
							P치gina Principal
						</a>
					</li>
					<li>
						<a href="https://rmnhg.github.io/theory">
						   Teor칤a
						</a>
					</li>
					<li>
						<a href="https://rmnhg.github.io/testing">
						   Laboratorio
						</a>
					</li>
					<li>
						<a href="https://github.com/rmnhg/rmnhg.github.io">
						   C칩digo fuente
						</a>
					</li>
					<li>
						<a href="https://github.com/rmnhg">
							Mi GitHub
						</a>
					</li>
	            </ul>
	        </nav>
	        <div class="copyright pull-right">
	            춸 2018, creado por Ram칩n Hern치ndez como p치gina web personal.
	        </div>
	    </div>
	</footer>
</BODY>

	<!--	 Core JS Files for Navigation Bar    -->
	<script src="assets/js/jquery.min.js" type="text/javascript"></script>
	<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/js/material.min.js"></script>

	<!--	Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
	<script src="assets/js/nouislider.min.js" type="text/javascript"></script>

	<!--	Plugin for the Datepicker, full documentation here: http://www.eyecon.ro/bootstrap-datepicker/ -->
	<script src="assets/js/bootstrap-datepicker.js" type="text/javascript"></script>

	<!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
	<script src="assets/js/material-kit.js" type="text/javascript"></script>

	<script type="text/javascript">

		$().ready(function(){
			// the body of this function is in assets/material-kit.js
			materialKit.initSliders();
            window_width = $(window).width();

            if (window_width >= 992){
                big_image = $('.wrapper > .header');

				$(window).on('scroll', materialKitDemo.checkScrollForParallax);
			}

		});
	</script>
	<script>
		function aud_play_pause() {
			var myAudio = document.getElementById("musica_de_fondo");
			if (myAudio.paused) {
				myAudio.play();
			} else {
				myAudio.pause();
			}
		}
	</script>
	<script>
		function SetVolume(val)
		{
			var player = document.getElementById('musica_de_fondo');
			console.log('Before: ' + player.volume);
			player.volume = val / 100;
			console.log('After: ' + player.volume);
		}
	</script>
	
</html>
